"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[12],{43012:(e,t,s)=>{s.r(t),s.d(t,{default:()=>T});var a=s(65043),n=s(82639),i=s(84235),r=s(80990),o=s(6051),l=s(70579);const c=e=>{let{items:t}=e;return(0,l.jsx)(r.A,{menu:{items:t.map((e=>({...e,label:(0,l.jsx)("div",{onClick:t=>{t.preventDefault(),e.onClick&&e.onClick(t)},className:"font-primary font-medium px-3",children:e.label})})))},children:(0,l.jsx)("a",{onClick:e=>e.preventDefault(),children:(0,l.jsx)(o.A,{children:(0,l.jsx)(i.A,{})})})})};var d=s(94733),m=s(61966),x=s(1648),p=s(41024);const k=e=>{let{task:t,cardClass:s,addCompletionDate:i,taskId:r,removeCompletionDate:o,isTickMarked:k,isChecked:u,showMenu:h,deleteTask:f,updateTask:y}=e;const[b,g]=(0,a.useState)(!1),{attributes:C,listeners:j,setNodeRef:v,transform:T,transition:N,isDragging:w}=(0,x.gl)({id:r}),D={transform:p.Ks.Transform.toString(T),transition:N},M=[{key:"1",label:"Update",icon:(0,l.jsx)(d.A,{}),onClick:e=>{y(r,t)}},{key:"2",label:"Delete",icon:(0,l.jsx)(m.A,{}),onClick:e=>{f(r)},danger:!0}];return(0,a.useEffect)((()=>{g(u)}),[]),(0,l.jsxs)("div",{ref:v,style:D,...C,...j,className:`border-b border-coolsecondary border-opacity-30 p-1.5 mb-2 bg-opacity-30 flex justify-start items-center space-x-5 ${s} ${w?"opacity-50 shadow-lg cursor-grabbing z-50":"cursor-pointer"} `,children:[(0,l.jsx)("div",{className:"bg-primary shadow-sm rounded-full cursor-pointer h-7 w-7 flex justify-center items-center",onClick:()=>{const e=!b;g(e),e?i(r):o(r),k(r,e)},children:b&&(0,l.jsx)(n.q1R,{className:"text-secondary text-sm"})}),(0,l.jsx)("div",{className:`text-[13px] text-secondary ${b&&"line-through"}`,children:t}),(0,l.jsx)("div",{className:"flex flex-1 justify-end items-center cursor-pointer",children:h&&(0,l.jsx)("div",{onClick:e=>{e.stopPropagation()},children:(0,l.jsx)(c,{items:M})})})]})};var u=s(47837),h=s(50423),f=s(92276),y=s(49342),b=s(6720),g=s(376),C=s(94047),j=s(23585),v=s(94830);const T=()=>{const{addTask:e,getTasklist:t,handleKeyDown:s,updateTask:n,handleUpdateClick:i,deleteTask:r,delAllTasks:o,taskCompletionDate:c,taskUncompleted:d,isTaskChecked:m,handleChange:p,inputRef:T,task:N,isUpdating:w,updateTaskId:D,listOfTasks:M=[],setListOfTasks:A}=(0,a.useContext)(C.j),{listOfHabits:I,showMenu:R,getMyHabits:U,habitCompleted:_,habitUncompleted:H,isHabitChecked:S,uncheckAllHabits:E}=(0,a.useContext)(C.e),O=(e,t,s)=>{const a=[...e],[n]=a.splice(t,1);return a.splice(s,0,n),a},$=(0,j.FR)((0,j.MS)(j.cA,{activationConstraint:{distance:10}}),(0,j.MS)(j.IG,{activationConstraint:{delay:250,tolerance:10}}),(0,j.MS)(j.uN,{coordinateGetter:x.JR})),G=(0,a.useCallback)((0,g.n)(t,1e4,[])),K=(0,a.useCallback)((0,g.n)(U,1e4,[]));return(0,a.useEffect)((()=>{K(),G()}),[]),(0,l.jsxs)("div",{children:[(0,l.jsx)(f.A,{title:" Today's Tasks"}),(0,l.jsxs)("div",{className:"flex justify-center items-center mb-4 rounded-md space-x-3 bg-gray-100 shadow-md",children:[(0,l.jsx)(u.A,{ref:T,type:"text",name:"task",value:N,onChange:p,placeholder:"Eg. Meeting with a client at 5 PM.",className:"bg-gray-100 pl-5",onKeyDown:s}),(0,l.jsxs)("button",{onClick:()=>{w?i(D,N):e()},className:"bg-primary h-full flex justify-center items-center text-secondary text-lg font-medium px-4 py-2 cursor-pointer hover:bg-coolsecondary hover:text-primary transition-colors duration-300 rounded-md",children:[(0,l.jsx)(h.t50,{className:"text-2xl mr-2"}),w?"Update":"Add"]})]}),(0,l.jsxs)("div",{className:"",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center ",children:[(0,l.jsx)("p",{className:"text-[10px] text-right font-medium text-secondary w-fit bg-green-100 rounded-sm p-1 mb-2 ",children:"My Habits"}),(0,l.jsx)(y.hi9,{title:"Refresh habits",className:"text-3xl text-coolsecondary hover:text-secondary cursor-pointer mb-2",onClick:E})]}),I.map(((e,t)=>(0,l.jsx)(k,{task:e.habit,cardClass:"bg-green-100",addCompletionDate:_,removeCompletionDate:H,isTickMarked:S,taskId:e._id,isChecked:e.isCompleted},t))),(0,l.jsxs)("div",{className:"flex justify-between items-center ",children:[(0,l.jsx)("p",{className:"text-[10px] text-right font-medium text-secondary w-fit bg-cyan-100 rounded-sm p-1 my-2 ",children:"Today's Tasks"}),(0,l.jsx)(b.F7I,{title:"Delete all tasks",className:"text-3xl text-coolsecondary hover:text-secondary cursor-pointer mb-2",onClick:o})]}),(0,l.jsx)(j.Mp,{collisionDetection:j.y$,onDragEnd:async e=>{const{active:s,over:a}=e;if(a&&s.id!==a.id){const e=M.findIndex((e=>e._id===s.id)),n=M.findIndex((e=>e._id===a.id));if(-1===e||-1===n)return;const i=O(M,e,n);A(i);const r=i.map((e=>e._id));console.log(e,n);const o=await(0,v.makeAuthenticatedPUTRequest)("/task/order",{taskOrder:r});console.log(o),t()}},sensors:$,children:(0,l.jsx)(x.gB,{items:M,strategy:x._G,children:M.map(((e,t)=>(0,l.jsx)(k,{taskId:e._id,task:e.task,cardClass:"bg-cyan-100",showMenu:R,deleteTask:r,updateTask:n,addCompletionDate:c,removeCompletionDate:d,isChecked:e.isCompleted,isTickMarked:m},t)))})})]})]})}}}]);
//# sourceMappingURL=12.c2ef0bdb.chunk.js.map